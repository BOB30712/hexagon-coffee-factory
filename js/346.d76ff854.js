"use strict";(self["webpackChunkhexagon_coffee_factory"]=self["webpackChunkhexagon_coffee_factory"]||[]).push([[346],{8673:function(t,e,l){l.d(e,{Z:function(){return f}});var a=l(6252),o=l(3577);const n={class:"modal",tabindex:"-1",ref:"modal"},d={class:"modal-dialog"},r={class:"modal-content"},s=(0,a._)("div",{class:"modal-header bg-danger text-white fw-bold"},[(0,a._)("h5",{class:"modal-title"},"資料刪除"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),i={class:"modal-body"},u={key:0,class:"text-danger fw-bold fs-4"},c={class:"modal-footer"},m=(0,a._)("button",{type:"button",class:"btn btn-secondary me-auto","data-bs-dismiss":"modal"},"取消返回",-1);function _(t,e,l,_,p,h){return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",d,[(0,a._)("div",r,[s,(0,a._)("div",i,[(0,a._)("p",null,[(0,a.Uk)("確定要刪除"),p.itemInfo.title?((0,a.wg)(),(0,a.iD)("span",u,'"'+(0,o.zw)(p.itemInfo.title)+'"',1)):(0,a.kq)("",!0),(0,a.Uk)("這筆資料嗎")])]),(0,a._)("div",c,[m,(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=e=>t.$emit("del-product",p.itemInfo))},"確定刪除")])])])],512)}var p=l(7424),h=l.n(p),b={data(){return{modal:{},itemInfo:{}}},props:{item:{type:Object,default(){return{}}}},watch:{item(){this.itemInfo=this.item}},methods:{show(){this.modal.show()},hide(){this.modal.hide()}},mounted(){this.modal=new(h())(this.$refs.modal)}},g=l(3744);const w=(0,g.Z)(b,[["render",_]]);var f=w},8346:function(t,e,l){l.r(e),l.d(e,{default:function(){return mt}});var a=l(6252),o=l(3577),n=l(9963);const d={class:"container"},r={class:"table mt-4"},s=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"購買時間"),(0,a._)("th",null,"Email"),(0,a._)("th",null,"購買款項"),(0,a._)("th",null,"應付金額"),(0,a._)("th",null,"是否付款"),(0,a._)("th",null,"編輯")])],-1),i={class:"list-unstyled"},u={class:"text-primary fw-bold"},c={class:"text-right"},m={class:"form-check form-switch"},_=["checked"],p={class:"form-check-label"},h={key:0},b={key:1},g={class:"btn-group"},w=["onClick"],f=["onClick"],y={"aria-label":"Page navigation example"},k={class:"pagination justify-content-center"},v=["onClick"];function x(t,e,l,x,C,D){const z=(0,a.up)("ordermodal"),P=(0,a.up)("delmodal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",d,[(0,a._)("table",r,[s,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(C.orders,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e},[(0,a._)("td",null,(0,o.zw)(t.$filter.date(e.create_at)),1),(0,a._)("td",null,[(0,a._)("span",null,(0,o.zw)(e.user.email),1)]),(0,a._)("td",null,[(0,a._)("ul",i,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.products,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t},[(0,a._)("span",u,(0,o.zw)(t.product.title),1),(0,a.Uk)(" 累計 "+(0,o.zw)(t.qty)+" 每份 "+(0,o.zw)(t.product.price)+"元 ",1)])))),128))])]),(0,a._)("td",c,(0,o.zw)(e.total),1),(0,a._)("td",null,[(0,a._)("div",m,[(0,a._)("input",{class:"form-check-input",type:"checkbox",checked:e.is_paid},null,8,_),(0,a._)("label",p,[e.is_paid?((0,a.wg)(),(0,a.iD)("span",h,"已付款")):((0,a.wg)(),(0,a.iD)("span",b,"未付款"))])])]),(0,a._)("td",null,[(0,a._)("div",g,[(0,a._)("button",{onClick:(0,n.iM)((t=>D.openmodal(e)),["prevent"]),class:"btn btn-outline-primary btn-sm"},"檢視",8,w),(0,a._)("button",{onClick:(0,n.iM)((t=>D.opendelmodal(e)),["prevent"]),class:"btn btn-outline-danger btn-sm"},"刪除",8,f)])])])))),128))])]),(0,a._)("nav",y,[(0,a._)("ul",k,[(0,a._)("li",{class:(0,o.C_)([{disabled:!C.pagination.has_pre},"page-item"])},[(0,a._)("a",{onClick:e[0]||(e[0]=(0,n.iM)((t=>D.changePage(C.CurrentPage-1)),["prevent"])),class:"page-link border",href:"#"},"Previous")],2),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(C.pagination.total_pages,((t,e)=>((0,a.wg)(),(0,a.iD)("li",{key:t,class:(0,o.C_)([{active:e+1==C.pagination.current_page},"page-item"])},[(0,a._)("a",{onClick:(0,n.iM)((t=>D.changePage(e+1)),["prevent"]),class:"page-link border",href:"#"},(0,o.zw)(e+1),9,v)],2)))),128)),(0,a._)("li",{class:(0,o.C_)([{disabled:!C.pagination.has_next},"page-item"])},[(0,a._)("a",{onClick:e[1]||(e[1]=(0,n.iM)((t=>D.changePage(C.CurrentPage+1)),["prevent"])),class:"page-link border",href:"#"},"Next")],2)])])]),(0,a.Wm)(z,{ref:"modal",order:C.temporder},null,8,["order"]),(0,a.Wm)(P,{ref:"delmodal",item:C.temporder,onDelProduct:D.delorder},null,8,["item","onDelProduct"])],64)}const C={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},D={class:"modal-dialog modal-xl",role:"document"},z={class:"modal-content border-0"},P=(0,a._)("div",{class:"modal-header bg-dark text-white"},[(0,a._)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,a._)("span",null,"訂單細節")]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),$={class:"modal-body"},M={class:"row"},q={class:"col-md-4"},O=(0,a._)("h3",null,"用戶資料",-1),j={class:"table"},H={key:0},I=(0,a._)("th",{style:{width:"100px"}},"姓名",-1),Y=(0,a._)("th",null,"Email",-1),Z=(0,a._)("th",null,"電話",-1),K=(0,a._)("th",null,"地址",-1),U={class:"col-md-8"},E=(0,a._)("h3",null,"訂單細節",-1),L={class:"table"},W=(0,a._)("th",{style:{width:"100px"}},"訂單編號",-1),N=(0,a._)("th",null,"下單時間",-1),S=(0,a._)("th",null,"付款時間",-1),A={key:0},B={key:1},F=(0,a._)("th",null,"付款狀態",-1),G={key:0,class:"text-success"},J={key:1,class:"text-muted"},Q=(0,a._)("th",null,"總金額",-1),R=(0,a._)("h3",null,"選購商品",-1),T={class:"table"},V=(0,a._)("thead",null,[(0,a._)("tr")],-1),X={class:"text-end"},tt={class:"modal-footer"},et=(0,a._)("button",{type:"button",class:"btn btn-primary"},"確認",-1);function lt(t,e,l,n,d,r){return(0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",D,[(0,a._)("div",z,[P,(0,a._)("div",$,[(0,a._)("div",M,[(0,a._)("div",q,[O,(0,a._)("table",j,[d.temporder.user?((0,a.wg)(),(0,a.iD)("tbody",H,[(0,a._)("tr",null,[I,(0,a._)("td",null,(0,o.zw)(d.temporder.user.name),1)]),(0,a._)("tr",null,[Y,(0,a._)("td",null,(0,o.zw)(d.temporder.user.email),1)]),(0,a._)("tr",null,[Z,(0,a._)("td",null,(0,o.zw)(d.temporder.user.tel),1)]),(0,a._)("tr",null,[K,(0,a._)("td",null,(0,o.zw)(d.temporder.user.address),1)])])):(0,a.kq)("",!0)])]),(0,a._)("div",U,[E,(0,a._)("table",L,[(0,a._)("tbody",null,[(0,a._)("tr",null,[W,(0,a._)("td",null,(0,o.zw)(d.temporder.id),1)]),(0,a._)("tr",null,[N,(0,a._)("td",null,(0,o.zw)(t.$filter.date(d.temporder.create_at)),1)]),(0,a._)("tr",null,[S,(0,a._)("td",null,[d.temporder.paid_date?((0,a.wg)(),(0,a.iD)("span",A,(0,o.zw)(t.$filter.date(d.temporder.paid_date)),1)):(0,a.kq)("",!0),d.temporder.paid_date?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",B,"時間不正確"))])]),(0,a._)("tr",null,[F,(0,a._)("td",null,[d.temporder.is_paid?((0,a.wg)(),(0,a.iD)("strong",G,"已付款")):((0,a.wg)(),(0,a.iD)("span",J,"尚未付款"))])]),(0,a._)("tr",null,[Q,(0,a._)("td",null,(0,o.zw)(d.temporder.total),1)])])]),R,(0,a._)("table",T,[V,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.temporder.products,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("th",null,(0,o.zw)(t.product.title),1),(0,a._)("td",null,(0,o.zw)(t.qty)+"/"+(0,o.zw)(t.product.unit),1),(0,a._)("td",X,(0,o.zw)(t.final_total),1)])))),128))])])])])]),(0,a._)("div",tt,[(0,a._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=(...t)=>r.hide&&r.hide(...t))},"取消 "),et])])])],512)}var at=l(7424),ot=l.n(at),nt={data(){return{modal:{},temporder:{}}},props:{order:{type:Object,default(){return{}}}},watch:{order(){this.temporder=this.order}},methods:{hide(){this.modal.hide(),console.log(this.order)},show(){this.modal.show()}},mounted(){const t=document.querySelector("#productModal");this.modal=new(ot())(t)}},dt=l(3744);const rt=(0,dt.Z)(nt,[["render",lt]]);var st=rt,it=l(8673),ut={data(){return{orders:[],temporder:{},CurrentPage:1,pagination:{}}},components:{ordermodal:st,delmodal:it.Z},methods:{getOrders(){const t=`https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/admin/orders?page=${this.CurrentPage}`;this.$http.get(t).then((t=>{this.orders=t.data.orders,this.pagination=t.data.pagination}))},openmodal(t){this.temporder=t;const e=this.$refs.modal;e.show()},opendelmodal(t){this.temporder=t;const e=this.$refs.delmodal;e.show()},delorder(t){this.temporder=t;const e=this.$refs.delmodal;e.show();let l=`https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/admin/order/${t.id}`;this.$http.delete(l).then((()=>{this.getOrders(),e.hide()}))},changePage(t){this.CurrentPage=t,this.getOrders()}},created(){this.getOrders()}};const ct=(0,dt.Z)(ut,[["render",x]]);var mt=ct}}]);
//# sourceMappingURL=346.d76ff854.js.map