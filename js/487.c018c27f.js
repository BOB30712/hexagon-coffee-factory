"use strict";(self["webpackChunkhexagon_coffee_factory"]=self["webpackChunkhexagon_coffee_factory"]||[]).push([[487],{9487:function(t,e,o){o.r(e),o.d(e,{default:function(){return W}});var r=o(6252),c=o(3577),s=o(9963);const n={class:"row mt-5 justify-content-center g-5"},d={class:"col-lg-5 col-8"},i=["src"],a={class:"col-lg-4 col-8 card border-0",style:{height:"300px"}},l={style:{color:"brown"}},u={class:"border rounded-pill border-3 border-dark px-2 ms-3"},p={class:"text-lg-end"},h={class:"d-flex justify-content-between mt-lg-auto"},g={class:"input-group",style:{width:"150px"}},m=["disabled"],y=(0,r._)("i",{class:"bi bi-dash"},null,-1),f=[y],b=(0,r._)("i",{class:"bi bi-plus"},null,-1),_=[b],v={class:"row my-5 d-flex justify-content-center"},x=(0,r._)("h3",{class:"other-product text-center"},"你可能也會喜歡",-1);function w(t,e,o,y,b,w){const k=(0,r.up)("LoadIng"),q=(0,r.up)("randomProduct");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(k,{active:b.isLoading},null,8,["active"]),(0,r._)("div",n,[(0,r._)("div",d,[(0,r._)("img",{class:"w-100",style:{height:"300px","object-fit":"cover"},src:b.product.imageUrl,alt:"商品圖片"},null,8,i)]),(0,r._)("div",a,[(0,r._)("h1",l,(0,c.zw)(b.product.title),1),(0,r._)("p",null,[(0,r.Uk)("分類:"),(0,r._)("span",u,(0,c.zw)(b.product.category),1)]),(0,r._)("h2",p,"價格:"+(0,c.zw)(b.product.price),1),(0,r.wy)((0,r._)("textarea",{class:"mb-4",name:"",id:"",cols:"20",rows:"10","onUpdate:modelValue":e[0]||(e[0]=t=>b.product.description=t)},null,512),[[s.nr,b.product.description]]),(0,r._)("div",h,[(0,r._)("div",g,[(0,r._)("button",{type:"button",class:"btn btn-outline-dark",disabled:1==b.productqty,onClick:e[1]||(e[1]=(0,s.iM)((t=>w.updateqty(b.productqty-1)),["prevent"]))},f,8,m),(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>b.productqty=t),type:"text",min:"1",class:"form-control form-control-sm text-center border-dark bg-transparent"},null,512),[[s.nr,b.productqty]]),(0,r._)("button",{type:"button",class:"btn btn-outline-dark",onClick:e[3]||(e[3]=(0,s.iM)((t=>w.updateqty(b.productqty+1)),["prevent"]))},_)]),(0,r._)("button",{type:"button",class:"btn btn-outline-dark text-nowrap",onClick:e[4]||(e[4]=(0,s.iM)((t=>w.AddtoCart(b.id,b.productqty)),["prevent"]))},"加入購物車")])])]),(0,r._)("div",v,[x,(0,r.Wm)(q,{onChangeProduct:w.getProduct},null,8,["onChangeProduct"])])],64)}const k={class:"container d-flex justify-content-center align-items-center flex-column flex-lg-row"},q=["src"],C={class:"card-img-overlay top-auto bg-dark-gradient"},j={class:"mb-5 d-flex justify-content-center detail"},P=["onClick"],$=(0,r._)("p",{class:"text-white text-center fw-bold test2 p-3",style:{"letter-spacing":"5px"}},"了解更多",-1),L=[$],M={class:"card-title text-start ps-4 author fw-bold"};function U(t,e,o,s,n,d){return(0,r.wg)(),(0,r.iD)("div",k,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.product,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e,class:"card bg-dark text-white detail-link col-lg-2 m-3 col-8"},[(0,r._)("img",{src:e.imageUrl,class:"card-img",alt:"商品",style:{height:"300px","object-fit":"cover"}},null,8,q),(0,r._)("div",C,[(0,r._)("div",j,[(0,r._)("a",{onClick:o=>t.$emit("change-product",e),class:"detail"},L,8,P)]),(0,r._)("h3",M,(0,c.zw)(e.title),1)])])))),128))])}o(7658);var z={data(){return{product:[]}},methods:{getRandomProduct(){const t="https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/products/all";this.$http.get(t).then((t=>{for(let e=0;e<4;e++){let e=Math.floor(Math.random()*t.data.products.length);this.product.push(t.data.products[e]),t.data.products.splice(e,1)}}))}},mounted(){this.getRandomProduct()}},D=o(3744);const A=(0,D.Z)(z,[["render",U]]);var H=A,R={data(){return{id:"",productqty:1,product:{},isLoading:!0}},components:{randomProduct:H},methods:{updateqty(t){this.productqty=t},productinfo(){const t=`https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/product/${this.id}`;this.$http.get(t).then((t=>{this.product=t.data.product,this.isLoading=!1}))},AddtoCart(t,e){const o={product_id:t,qty:Number(e)};console.log(o);const r="https://vue3-course-api.hexschool.io/api/noname-myfirst-vueproject/cart";this.$http.post(r,{data:o}).then((()=>{this.$emitter.emit("productcart","觸發子元件重新整理"),this.productqty=1}))},getProduct(t){this.isLoading=!0,this.id=t.id,this.productinfo()}},created(){this.id=this.$route.params.productid,this.productinfo()}};const V=(0,D.Z)(R,[["render",w]]);var W=V}}]);
//# sourceMappingURL=487.c018c27f.js.map